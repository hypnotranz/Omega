project:
  name: "OmegaLLM"
  description: "Lisp dialect with intensional semantics for AI agent orchestration"

features:
  # Phase A: Core Magic (Foundation)
  - id: job-004-call-cc
    title: "Implement Core Magic (call/cc + Evidence)"
    type: implementation
    requirements: "CLAUDE-JOBS/004-IMPLEMENT-CORE-MAGIC.md"
    acceptance_criteria:
      - ContinuationVal type in values.ts
      - call/cc primitive captures current continuation
      - call-with-prompt/abort-to-prompt for delimited continuations
      - evidence-id, verify-evidence, evidence-stale? primitives
      - All tests pass (npx vitest run test/continuations/)

  # Phase B: Clean Composition
  - id: job-005-conditions
    title: "Non-Unwinding Conditions (CL-style)"
    type: implementation
    depends_on:
      - job-004-call-cc
    requirements: "CLAUDE-JOBS/005-NON-UNWINDING-CONDITIONS.md"
    acceptance_criteria:
      - signal, error, handler-bind primitives
      - restart-bind, invoke-restart, find-restart primitives
      - ConditionFrame and RestartFrame in machine.ts
      - All tests pass (npx vitest run test/conditions/)

  - id: job-006-monads
    title: "Monadic Primitives (unit/bind/mzero/mplus)"
    type: implementation
    # No depends_on - can run parallel with 004
    requirements: "CLAUDE-JOBS/006-MONADIC-PRIMITIVES.md"
    acceptance_criteria:
      - unit, mzero, mplus, bind primitives
      - KBind frame for monadic sequencing
      - lib/monad.lisp with mdo macro
      - All tests pass (npx vitest run test/monad/)

  - id: job-007-provenance
    title: "Full Provenance System"
    type: implementation
    depends_on:
      - job-004-call-cc
    requirements: "CLAUDE-JOBS/007-FULL-PROVENANCE-SYSTEM.md"
    acceptance_criteria:
      - ProvenanceGraph type
      - provenance-trace, provenance-record primitives
      - provenance-check-staleness primitive
      - Persistent storage integration
      - All tests pass (npx vitest run test/provenance/)

  # Phase C: Patterns
  - id: job-008-solvers
    title: "Search Patterns & Composable Solvers"
    type: implementation
    depends_on:
      - job-005-conditions
      - job-006-monads
    requirements: "CLAUDE-JOBS/008-SEARCH-PATTERNS-SOLVERS.md"
    acceptance_criteria:
      - make-solver, compose-* combinators
      - repair-until-valid, fixpoint primitives
      - fact-store, budget-split primitives
      - All tests pass (npx vitest run test/solver/)

  # Phase E: Documentation & Demos
  - id: job-016-quick-ref
    title: "Quick Reference Manual & Demo Suite"
    type: documentation
    # No dependencies - can run standalone
    requirements: "CLAUDE-JOBS/016-QUICK-REFERENCE-AND-DEMOS.md"
    output: "docs/USER-MANUAL--00--Quick-Reference.md"
    acceptance_criteria:
      - Create Quick Reference with 27 sections (one per chapter)
      - Create demo/by-chapter/ directory with 27 runnable demos
      - Find existing tests first, update them with doc references
      - All demos use semantic examples (not trivial values)
      - All cross-references resolve correctly
  # Phase F: Session Serialization & Traces
  - id: job-018a-serializer
    title: "State Serialization (Foundation)"
    type: implementation
    requirements: "CLAUDE-JOBS/018a-STATE-SERIALIZATION.md"
    acceptance_criteria:
      - SerializeState and deserializeState pure functions
      - Handles Maps (converts to arrays)
      - Handles circular Ctx.parent references
      - Handles Native functions (registry lookup)
      - Handles all 18 Frame types
      - Handles Resumptions (reconstructs invoke)
      - All tests pass (npx vitest run test/session/serializer.spec.ts)

  - id: job-018b-writer
    title: "Session Writer and File Format"
    type: implementation
    depends_on:
      - job-018a-serializer
    requirements: "CLAUDE-JOBS/018b-SESSION-WRITER.md"
    acceptance_criteria:
      - SessionWriter class
      - Event types (input, step, checkpoint, etc.)
      - JSONL file format with checkpoints
      - Index file with state and receipt lookup
      - All tests pass (npx vitest run test/session/writer.spec.ts)

  - id: job-018c-reader-jump
    title: "Session Reader and Jump Controller"
    type: implementation
    depends_on:
      - job-018a-serializer
      - job-018b-writer
    requirements: "CLAUDE-JOBS/018c-SESSION-READER-JUMP.md"
    acceptance_criteria:
      - SessionReader class
      - JumpController class
      - Checkpoint finding
      - State restoration
      - LLM receipt usage
      - All tests pass (npx vitest run test/session/reader-jump.spec.ts)

  - id: job-018d-renderer
    title: "Pretty Renderer"
    type: implementation
    depends_on:
      - job-018b-writer
    requirements: "CLAUDE-JOBS/018d-PRETTY-RENDERER.md"
    acceptance_criteria:
      - renderEvent function
      - renderTrace function
      - Depth-based indentation
      - Source labeling (REPL/EVAL/LLM/etc)
      - All tests pass (npx vitest run test/session/render.spec.ts)

  - id: job-018e-repl
    title: "REPL Integration"
    type: implementation
    depends_on:
      - job-018c-reader-jump
      - job-018d-renderer
    requirements: "CLAUDE-JOBS/018-SESSION-SERIALIZATION.md"
    acceptance_criteria:
      - New REPL commands (:session save/load/goto/trace/resume)
      - Auto-save current session
      - What-if exploration (jump and modify)
      - All integration tests pass
      - Manual verification of all workflows
